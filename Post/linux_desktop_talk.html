<!DOCTYPE html>
<html lang="zh" class='han-la' data-theme="dark">

<head>
  <script src="/js/jquery-3.7.0.min.js"></script>
  <script src="/js/jquery.toc.min.js"></script>
  <!-- THEME-->
  <link rel="stylesheet" href="/css/pico.css">
  <link rel="stylesheet" href="/css/custom.css">
  <script>
    function addFontSize(addPx) {
      html = document.querySelector('html');
      currentSize = parseFloat(window.getComputedStyle(html, null)
        .getPropertyValue('font-size'));
      html.style.fontSize = (currentSize + addPx) + 'px';
    }
    function toggleDarkMode(el) {
      var theme = 'dark'
      if (!el.checked) {
        theme = 'light';
      } else {
        var theme = 'dark';
      }
      document.documentElement.setAttribute('data-theme', theme)
    }
  </script>
  <!-- prism.js -->
  <link href="/css/prism.css" rel="stylesheet" />
  <!-- KaTex-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"
    integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"
    integrity="sha384-cpW21h6RZv/phavutF+AuVYrr+dA8xD9zs6FwLpaCct6O9ctzYFfFr4dgmgccOTx"
    crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
    crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      renderMathInElement(document.body, {
        // customised options
        // • auto-render specific keys, e.g.:
        delimiters: [
          { left: '$$', right: '$$', display: true },
          { left: '$', right: '$', display: false },
          { left: '\\(', right: '\\)', display: false },
          { left: '\\[', right: '\\]', display: true }
        ],
        // • rendering keys, e.g.:
        throwOnError: false
      });
    });
  </script>
  <!-- text-autospace.js -->
  <script src='https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js'></script>
  <script src='https://mastermay.github.io/text-autospace.js/text-autospace.min.js'></script>
  <!-- Google font预加载&缓存 -->
  <link type="text/css" rel="preload stylesheet" as="style"
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap"
    crossorigin>
  <!-- Google font预加载&缓存 -->
  <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <noscript>
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap"
      onload="this.media='all'" />
  </noscript>
  <!-- Google font预加载&缓存 END-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.0.0/style.css" />
  <!--Typer-->
  <script src="https://unpkg.com/typeit@8.7.1/dist/index.umd.js"></script>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Candlest's Blog</title>
</head>

<body data-theme="dark" lang="zh-Hans-CN" data-prismjs-copy="复制文本" data-prismjs-copy-error="按Ctrl+C复制"
  data-prismjs-copy-success="文本已复制！">
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true, theme: 'dark',});
  </script>
  <main class="container">
    <nav id="container">
      <ul>
        <li><a href="/">主页</a></li>
        <li>
          <details role="list" dir="rtl">
            <summary aria-haspopup="listbox" role="link">文章</summary>
            <ul role="listbox">
              <li><a href="/categories.html">专栏</a></li>
              <li><a href="/tags.html">标签</a></li>
            </ul>
          </details>
        </li>
        <li>
          <details role="list" dir="rtl">
            <summary aria-haspopup="listbox" role="link">关于</summary>
            <ul role="listbox">
              <li><a href="/about_page.html">关于博客</a></li>
              <li><a href="/about_me.html">关于我</a></li>
            </ul>
          </details>
        </li>
      </ul>
      <ul>
        <!-- <li class="float-left sticky"># Candlest 's Blog</li> -->
        <li><a href="/feed.xml">RSS</a></li>
        <li><a href="/friends.html">友链</a></li>
        <li><a href="/gk.html">高考专栏</a></li>
      </ul>
    </nav>
    <center>
      <p id="top-text"></p>
  </center>
  <script>
    new TypeIt("#top-text", {
      strings: "纵被春风吹作雪，绝胜南陌碾成尘。<em>—— [宋]王安石《北陂杏花》</em>",
      speed: 50,
      waitUntilVisible: true,
    }).go();
  </script>
    <div class="line-numbers">
      
<div>
  <header>
    <h1 align="center">桌面迁移杂谈</h1>
    <p align="center"><small><span>2023-09-30 20:23 |
          <a href="/categories.html#Arch Linux日用">Arch Linux日用</a> | <a href="/tags.html#Linux">#Linux#</a> </span></small></p>
  </header>
  <details class="hover-open card">
    <summary> 目录 </summary>
    <ul data-toc></ul>
   </details>
  <div id="container">
    <h2>from KDE to GNOME (2023-09-02)</h2>
<p>由于向往用 Rust 开发 gtk4 ，从 KDE 迁移到了 GNOME 。</p>
<p><del>现在有点后悔了。</del></p>
<p>GNOME ，或者是 gtk4 开启了大一统模式。不同于 Qt 的百花齐放， gtk4 甚至不能设置 theme （采用文件 copy + rename 的另说），大家都是 libadwaita 的 style 了。除此以外，用户在 GUI 界面能进行的设置也很少，比如 GNOME Terminal 甚至没有给我们提供一个 Setting 页面——在大部分的 gtk4 Application 里面，我们只有一个设置选项：Theme （Light, Dark and Follow System）。</p>
<p>GNOME 的雷点还有很多，一时半会不能全面陈述。（ apologize for my week ability of organzing words ）</p>
<p>下面是些许 NOTES ，罗列出一些避坑条目。</p>
<h3>输入法 Rime-ice</h3>
<p>从 KDE 切换到 GNOME ，我理想当然地就想把基于 Qt 的 fcitx 换成曾经集成在 GNOME 里的 ibus 输入法框架，但是发现 ibus 可配置性似乎不如 fcitx ，而且大家似乎都更爱用 fcitx ，即 fcitx 的资料远多于 ibus 。</p>
<p>所以我选择了一个折中的方案，安装 gnome-shell 扩展： <a href="https://extensions.gnome.org/extension/261/kimpanel/">Input Method Panel</a> 。 它能够让 fcitx 的 tray 和输入法候选栏以 gnome-shell 的样式呈现。</p>
<h3>代理</h3>
<p>由于 GNOME 似乎不喜欢 tray icons 且对 Background Application 的支持不佳， 我们得从 clash-for-windows 迁移到一个 proxy manager without trays 。一个成熟的解决方案是 v2rayA ， 我参照了<a href="https://arch.icekylin.online/">archlinux 简明指南</a>的代理配置方法，目前运行良好。</p>
<p>提一嘴， GNOME Setting 的 proxy 选项能够被大部分的软件适配，所以无须像在 KDE 下那么麻烦地又设置 <code>/etc/environment</code> 又改 <code>/usr/share/applications/</code> 。 这或许就是 GNOME 的地位吧。</p>
<h3>GNOME Shell Extensions</h3>
<p>GNOME Shell Extensions 从 <code>gnome-tweak</code> 分离出来了，默认集成在 <code>gnome</code> 这个软件组里。我们要安装的只有一个包： <code>gnome-browser-connector</code> ，以及其对应的浏览器扩展。</p>
<h3>统一主题</h3>
<p>chrome 的 gtk appearance 默认使用 gtk3 ，不能适配 GNOME Setting 里面的 Dark Mode ，所以我们要安装 <code>gnome-themes-extra</code> 和 <code>gnome-tweak</code> ，启用 <code>Adwaida Dark</code> 作为 <strong>已过时的应用程序主题</strong> <ins>gtk3 主题</ins>。</p>
<p>暂时就写这么多，以后再补充。</p>
<p>最后修改于 2023-09-02T20:56:31+08:00</p>
<h2>from GNOME to XFCE (2023-09-30)</h2>
<p>实在受不了 GNOME 的臃肿与低自定义化程度，尤其是在我要忍受 gtk3 gtk4 互搏的时候。想着体验轻量级的桌面环境，于是再次装回了 lxqt 。但是lxqt也是挺让人头痛的，尤其是默认的 qterminal 丑出天际，是我不能忍受的。</p>
<p>最后改成了 XFCE4 。</p>
<h3>输入法</h3>
<p>rime 有时占用还挺大，而且不兼容 fcitx 的一些功能， 所以这次直接采用 fcitx5-chiness-additions 里的拼音。</p>
<p>参考： <a href="https://zhuanlan.zhihu.com/p/582899001">安装配置fcitx输入法</a></p>
<h3>美化</h3>
<p>没有刻意美化，但是发现 <code>archlinuxcn</code> 里的 mcmojave-circle-icon-theme-git 和 mojave-gtk-theme-git 效果最好，遂使用。</p>
<h3>设置 qt 应用样式</h3>
<p>安装 <code>qt5ct</code> 和 <code>kvantum</code> ，设置 <code>QT_QPA_PLATFORMTHEME=qt5ct</code>。
在 <code>kvantum</code> 和 <code>qt5ct</code> 更改主题即可。</p>
<blockquote>
<p>不要使用 <code>QT_STYLE_OVERRIDE=gtk</code></p>
</blockquote>
<h3>感想</h3>
<p>xfce 没有 lxqt/lxde 那么丑，配置下来其实挺好看的。</p>
  </div>
</div>

      <div id="commit">
        <script src="https://giscus.app/client.js" data-repo="candlest/candlest.github.io" data-repo-id="R_kgDOJ_ICfw"
          data-category="Announcements" data-category-id="DIC_kwDOJ_ICf84CYNFn" data-mapping="pathname" data-strict="0"
          data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="dark"
          data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async>
          </script>
      </div>
      <script src="/js/prism.js"></script>
    </div>
    <footer>
      <p align="center">
        <small>
          <i>generated by <a href="https://github.com/Candlest/rigos">rigos</a>, beautified by <a
              href="https://picocss.com/">pico.css</a>.</i>
        </small>
      </p>
    </footer>
  </main>
  <!-- <button class="contrast switcher">
    <label for="switch">
      <input type="checkbox" id="switch" name="switch" role="switch" onclick="toggleDarkMode(this)" checked="true">
      <font style="vertical-align: inherit;">
        <font style="vertical-align: inherit;">黑夜模式</font>
      </font>
    </label>
    </a>
    </li>
  </button> -->
</body>

</html>